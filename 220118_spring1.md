---
title:  " 스프링 핵심원리 - 고급편"
search: false
categories: 
  - Spring
toc: true  
last_modified_at: 2022-01-18T10:06:00-05:00
tags:
  - Spring
  - Spring Boot
author: 최혜정
---

# Intro
안녕하세요. 최혜정 사원입니다.
인프런 스프링 핵심원리 고급편을 수강하고 스프링 AOP에 대해서 적어보려고 합니다.  

**https://www.inflearn.com/course/스프링-핵심-원리-고급편/dashboard**  
**[참고] 작성자는 Windows, STS 환경에서 따라해보았습니다.**  

# 프로젝트 생성

# 1. 프록시
프록시는 기존 코드를 수정하지 않고 코드 중복을 피할 수 있는 방법으로써 다음과 같은 특징을 지님  
- 핵심 기능의 실행은 다른 객체에 위임하고 부가적인 기능을 제공하는 객체 = 프록시(proxy)
- 실제 핵심 기능을 실행하는 객체 = 대상 객체
- 프록시는 핵심 기능을 구현하지 않음
- 대신 여러 객체에 공통으로 적용할 수 있는 기능을 구현

# 1. AOP 개념
AOP란 Apsects Oriented Programming 으로, **관점 지향 프로그래밍**의 약자이다.  
여러 객체에 공통으로 적용할 수 있는 기능을 분리해 재사용성을 높여주는 기법으로써 다음과 같은 특징을 지님
- 공통 기능 구현(부가 기능)과 핵심 기능 구현의 분리
- 핵심 기능에 공통 기능을 삽입하며 다음과 같은 방법이 존재  

실제 요청을 받아 들이고 처리하는 로직을 **핵심기능**이라고 하고 핵심 기능을 보조하여 가령 로그를 남겨주는 로직을 **부가 기능**이라고 한다.    

주문에 대한 로직이 있다고 가정하자. 그리고 각 컴포넌트에서 로그를 남겨주는 코드를 적용해야한다면  
다음과 같이 각 컴포넌트에 로그를 일일이 남겨주는 로직을 핵심기능안에 넣어야 한다.  
![캡처1](./core/image/캡처1.PNG)  

이러한 부가 기능은 **횡단 관심사**(cross-cutting concerns)가 된다.  **즉, 하나의 부가 기능이 여러 곳에 동일하게 사용된다는 뜻이다.**
![캡처2](./core/image/캡처2.PNG)  

그런데 로그찍는 방법이 달라졌는데 컴포넌트가 100개가 넘는다면 100개가 넘는 로직를 뜯어고쳐야한다.   
해결방법 -> 로그추적과 같은 공통관심사를 핵심기능과 완전히 분리하고자 하는 취지에서 나온것이 AOP 개념이다.

- 스프링 AOP는 프록시 객체를 자동으로 생성해줌
- AOP의 공통 기능을 Aspect라 칭하며, 아래와 같은 주요 용어가 존재
  - Advice: 언제 공통 관심 기능을 핵심 로직에 적용할 지를 정의
  - Joinpoint: Advice를 적용 가능한 지점을 의미  
    (매서드 호출, 필드 값 변경 등, 스프링은 프록시를 이용해 AOP를 구현하기 때문에 매서드 호출에 대한 Joinpoint만 지원)
  - Pointcut: Joinpoint의 부분 집합, 실제 Advice가 적용되는 Joinpoint를 나타냄  
    (스프링에서는 정규 표현식 및 AspectJ의 문법을 통해 Pointcut 정의)
  - Weaving: Advice를 핵심 로직 코드에 적용하는 것
  - Aspect: 여러 객체에 공통으로 적용되는 기능

