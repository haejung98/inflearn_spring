---
title:  "SSL(Secure Socket Layer)"
search: false
categories: 
  - SSL
toc: true  
last_modified_at: 2022-01-19T10:06:00-05:00
tags:
  - SSL
  - TLS
author: 최혜정
---

# Intro
안녕하세요. 최혜정 사원입니다.

# HTTP VS HTTPS
- HTTP
    - Hypertext Transfer Protocol의 약자
    - 즉 Hypertext 인 HTML을 전송하기 위한 통신규약을 의미한다.   
    - 암호화되지 않은 방법으로 데이터를 전송한다. (악의적인 감청, 데이터 변조의 가능성)
- HTTPS
    - 보안이 강화된 HTTP
    - Hypertext Transfer Protocol Over Secure Socket Layer의 약자
    - 모든 HTTP 요청과 응답 데이터는 네트워크로 보내지기 전에 암호화된다.
    - HTTPS는 HTTP의 하부에 SSL과 같은 보안계층을 제공함으로써 동작한다.
    
![그림](https://i.imgur.com/4GHgl0T.png)

![그림2](https://mblogthumb-phinf.pstatic.net/MjAyMDExMDVfMjQ5/MDAxNjA0NTM1MTI0NzE1.00BvdcZNRLEOBWZPuQgZ3z0RZVuSHGUt3W0FZeAVEjcg.JzhYEerfZcufm2dClNTlBQMfw6xXcmlULEVjdmu6pBsg.PNG.skinfosec2000/SE-7c7eb625-28c2-4057-9eeb-bfa739f09f6f.png?type=w800) 

**HTTPS는 SSL 프로토콜 위에서 돌아가는 프로토콜을 의미한다.**


SSL과 TLS는 '보안 계층'이라는 독립적인 프로토콜 계층을 만들어, 응용 계층과 전송 계층 사이에 속하게 된다.   
HTTPS는 SSL 또는 TLS 위에 HTTP 프로토콜을 얹어 보안된 HTTP 통신을 하는 프로토콜입니다.    
  
SSL과 TLS는 같은 의미의 단어이다. TLS가 SSL의 후속 버전이지만, SSL이 일반적으로 더 많이 사용되는 용어이다.   

# SSL(Secure Socket Layer)
![그림3](https://user-images.githubusercontent.com/50317129/129691442-090810ed-30c5-4245-aa9d-9dd785f621a6.png)

SSL이란, 웹 서버와 클라이언트의 통신 암호화 프로토콜이다.    

SSL이 적용되지 않은 통신의 경우, 평문이 그대로 전송된다.   
만약 제 3자가 어떠한 방식으로든 통신 패킷을 탈취할 경우, 그 내용을 쉽게 확인할 수 있다. 

SSL을 적용한다면 이러한 문제를 기술적으로 해결할 수 있다.    
요청을 암호화해서 보내므로 통신 패킷이 탈취되도 복호화 키가 없으면 원래 내용을 알 수 없기 때문이다.    


# SSL의 암호화
암호를 만드는 행위인 **암호화**를 할 때 사용하는 일종의 비밀번호를 **키(key)** 라고 한다.    
이 키에 따라서 암호화된 결과가 달라지기 때문에 키를 모르면 암호를 푸는 행위인 **복호화**를 할 수 없다.   

통신 내용이 공격자에게 노출되는 것을 막기 위해서는 암호화가 필요하다.   
따라서 인증서는 정보를 암호화해서 저장한다.   

## 대칭키
대칭키는 **동일한 키로 암호화와 복호화를 같이 할 수 있는 방식**의 암호화 기법을 의미한다.    
즉 암호화를 할 때 1234라는 값을 사용했다면 복호화를 할 때 1234라는 값을 입력해야 합니다. 

```
echo 'this is the plain text' > plaintext.txt;
openssl enc -e -des3 -salt -in plaintext.txt -out ciphertext.bin;
```

- this is the plain text 내용이 담겨있는 plaintext.txt 파일이 생성 
- enc -e -des3: des3 방식으로 암호화 함     
- -in plaintext.txt -out ciphertext.bin: plaintext.txt 파일을 암호화 한 결과를 ciphertext.bin 파일에 저장      
- 입력한 비밀번호가 대칭키

```
openssl enc -d -des3 -in ciphertext.bin -out plaintext2.txt;
```
- enc -d 옵션으로 인해서 ciphertext.bin 파일을 plaintext2.txt 파일로 복호화하겠다는 의미

문제는 암호를 주고받는 사람들 사이에 대칭키를 전달하기가 어렵다는 점이다.    
대칭키가 유출되면 키를 획득한 누구나 암호 내용을 복호화할 수 있다.    


# SSL 인증서
SSL 인증서는 클라이언트와 서버간의 통신을 제3자(CA)가 보증해주는 전자화된 문서    
클라이언트가 서버에 접속한 직후에 서버는 클라이언트에게 이 인증서 정보를 전달하게 됩니다.

## SSL 인증서의 장점
 - 통신 내용이 공격자에게 노출되는 것을 막을 수 있다. -> 암호화를 통해서
 - 클라이언트가 접속하려는 서버가 신뢰할 수 있는 서버인지를 판단할 수 있다.
 - 통신 내용의 악의적인 변경을 방지할 수 있다.


# SSL 인증서의 역할
> 1. 클라이언트가 접속한 서버가 신뢰할 수 있는 서버임을 보장한다.
> 2. SSL 통신에 사용할 공개키를 클라이언트에게 제공한다.

# CA
공인된 기관
인증서를 발급해줌 
인증서의 역할은 클라이언트가 접속한 서버가 클라이언트가 의도한 서버가 맞는지를 보장하는 역할을 한다.   
이 역할을 하는 민간기업들이 있는데 이런 기업들을 CA(Certificate authority) 혹은 Root Certificate 라고 부른다.   
CA는 아무 기업이나 할 수 있는 것이 아니고 신뢰성이 엄격하게 공인된 기업들만 참여할 수 있다.    

SSL을 통해서 암호화된 통신을 제공하려는 서비스는 CA를 통해서 인증서를 구입해야 한다.    
CA는 서비스의 신뢰성을 다양한 방법으로 평가하게 됩니다.

# SSL 인증서의 내용
> 1. 서비스의 정보 (인증서를 발급한 CA, 서비스의 도메인 등등)
> 2. 서버 측 공개키 (공개키의 내용, 공개키의 암호화 방법)

1번은 클라이언트가 접속한 서버가 클라이언트가 의도한 서버가 맞는지에 대한 내용을 담고 있고,     
2번은 서버와 통신할 때 사용할 공개키와 그 공개키의 암호화 방법들의 정보를 담고 있다. 

서비스의 도메인, 공개키와 같은 정보는 서비스가 CA로부터 인증서를 구입할 때 제출해야한다.

# SSL의 원리
SSL의 통신하는 원리는 아래와 같으며, 이러한 일련의 과정을 HandShake라 한다.    
클라이언트와 서버 간의 요청/응답을 반복하며 통신에 필요한 사전 작업을 하는게 마치 악수 같아 붙어졌다고 한다.    
![그림4](https://user-images.githubusercontent.com/50317129/129752108-1423e7cf-3c4c-4e4c-a77a-7a76d208d7f8.png)




